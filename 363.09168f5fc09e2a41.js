"use strict";(self.webpackChunkSpazioZero=self.webpackChunkSpazioZero||[]).push([[363],{7363:(xt,v,c)=>{c.r(v),c.d(v,{GestioneDocumentiModule:()=>d});var s=c(6895),_=c(1039),D=c(5861),r=c(433),h=c(3824),x=c(9808),T=c(3315),Z=c(6741),t=c(8274),I=c(6853),M=c(7290),C=c(2775),S=c(3403),b=c(3695),G=c(6532),A=c(7125),U=c(1588);const O=["uploadImg"],P=["accordionDetailDoc"];function y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-document-item",59),t.NdJ("outSelect",function(a){t.CHM(e);const p=t.oxw(3);return t.KtG(p.loadFileDetail(a))}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("file",e)}}function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-img-item",59),t.NdJ("outSelect",function(a){t.CHM(e);const p=t.oxw(3);return t.KtG(p.loadFileDetail(a))}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("file",e)}}function N(n,o){if(1&n&&(t.ynx(0),t.YNc(1,y,1,1,"app-document-item",58),t.YNc(2,q,1,1,"app-img-item",58),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.valideExtensionDoc(e)),t.xp6(1),t.Q6J("ngIf",i.valideExtensionImg(e))}}function F(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",62)(2,"h3",63),t._uU(3),t.qZA(),t.TgZ(4,"app-icon",64),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeFile())}),t.qZA()(),t.TgZ(5,"div",65),t._UZ(6,"img",66),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",null==e.fileSelected?null:e.fileSelected.name,""),t.xp6(3),t.Q6J("src",null==e.fileSelected?null:e.fileSelected.data,t.LSH)("alt",null==e.fileSelected?null:e.fileSelected.name)}}function J(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",73)(1,"div",74)(2,"app-icon",75),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.searchControl.setValue(""))}),t.qZA()()()}}function w(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-icon",70),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return a.showSearch=!1,t.KtG(a.searchControl.setValue(""))}),t.qZA(),t._UZ(2,"input",71),t.YNc(3,J,3,0,"div",72),t.BQk()}if(2&n){const e=t.oxw(4);t.xp6(2),t.Q6J("appFocus",!0)("formControl",e.searchControl),t.xp6(1),t.Q6J("ngIf",e.searchControl.value)}}function E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"h3",76),t._uU(1),t.qZA(),t.TgZ(2,"div")(3,"app-icon",77),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.showSearch=!0)}),t.qZA(),t.TgZ(4,"app-icon",64),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.removeFile())}),t.qZA()()}if(2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",null==e.fileSelected?null:e.fileSelected.name,"")}}function Q(n,o){if(1&n&&(t.TgZ(0,"div",62),t.YNc(1,w,4,3,"ng-container",60),t.YNc(2,E,5,1,"ng-template",null,67,t.W1O),t.qZA(),t.TgZ(4,"div",68),t._UZ(5,"app-document-item-table",69),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.showSearch)("ngIfElse",e),t.xp6(4),t.Q6J("data",null==i.fileSelected?null:i.fileSelected.data)("search",i.searchValue)}}function L(n,o){if(1&n&&(t.ynx(0),t.YNc(1,F,7,3,"ng-container",60),t.YNc(2,Q,6,4,"ng-template",null,61,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.valideExtensionImg(i.fileSelected))("ngIfElse",e)}}function z(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",78),t._UZ(2,"app-icon",79),t.qZA(),t.TgZ(3,"h3",80),t._uU(4," Selezionare un'immagine o un documento per visualizzare i dettagli "),t.qZA(),t.BQk())}function Y(n,o){if(1&n&&(t.TgZ(0,"div",51)(1,"ul",52),t.YNc(2,N,3,2,"ng-container",50),t.qZA(),t.TgZ(3,"div",53)(4,"div",54)(5,"div",55)(6,"div",56),t.YNc(7,L,4,2,"ng-container",57),t.YNc(8,z,5,0,"ng-container",57),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.fileList),t.xp6(5),t.Q6J("ngIf",e.fileSelected),t.xp6(1),t.Q6J("ngIf",!e.fileSelected&&e.fileList.length)}}function H(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.nome),t.xp6(2),t.Oqu(e.cognome),t.xp6(2),t.hij(" ",t.xi3(7,4,e.dataNascita,"dd/MM/yyyy"),""),t.xp6(3),t.hij(" ",e.luogoNascita,"")}}var f=(()=>{return(n=f||(f={}))[n.FLOGIO_FAMIGLIA=0]="FLOGIO_FAMIGLIA",n[n.STATO_CIVILE=1]="STATO_CIVILE",n[n.SCHEDA_INDIVIDUALE=2]="SCHEDA_INDIVIDUALE",n[n.CARTELINO_IDENTITA=3]="CARTELINO_IDENTITA",n[n.SCHEDE_INVIDIDUALE_ELIMINATE=4]="SCHEDE_INVIDIDUALE_ELIMINATE",f;var n})();class m{constructor(o,e){this._imageService=o,this._anagraficaService=e,this.fileSelected=null,this.fileList=[{name:"img-prueba1.png",size:3357322,state:"SUCCESS",data:"spaziozero-template/assets/images/img-prueba1.png"},{name:"img-prueba2.png",size:3357322,state:"SUCCESS",data:"spaziozero-template/assets/images/img-prueba2.png"},{name:"img-prueba3.jpg",size:3357322,state:"SUCCESS",data:"spaziozero-template/assets/images/img-prueba3.jpg"},{name:"img-prueba4.png",size:3357322,state:"SUCCESS",data:"spaziozero-template/assets/images/img-prueba4.png"}],this.showSearch=!1,this.searchValue="",this.searchControl=new r.NI,this.personaList=[],this.collapseList=[],this.loadFileDetail=i=>this.fileSelected=i}ngOnInit(){this._anagraficaService.anagraficaList(0,5).subscribe({next:o=>{this.personaList=o.data},error:o=>{console.log(o)}})}ngAfterViewInit(){this.handlerAccordionDetailDoc=new Z.UQ(this.accordionDetailDoc?.nativeElement);let o=[].slice.call(document.querySelectorAll(".collapse"));this.collapseList=o.map(function(e){return new Z.UO(e,{toggle:!1})});for(const e in f)isNaN(e)||document.getElementById(`collapse${parseInt(e)+1}`)?.addEventListener("hidden.bs.collapse",()=>{setTimeout(()=>{this.collapseList[e].hide()})})}valideExtensionDoc(o){let e=!1;for(const i of h.y.TYPES_EXT_SHEET)if(o.name.includes(`.${i}`)){e=!0;break}return e}valideExtensionImg(o){let e=!1;for(const i of h.y.TYPES_EXT_IMG)if(o.name.includes(`.${i}`)){e=!0;break}return e}removeFile(){const o=this.fileList.findIndex(e=>e.uuid==this.fileSelected.uuid);o<0||(this.fileList.splice(o,1),this.resetDetailFile())}resetDetailFile(){this.fileSelected=null,this.showSearch=!1}uploadImage(){var o=this;return(0,D.Z)(function*(){try{const e=o.uploadImg?.nativeElement;let i=[];for(let a=0;a<e.files.length;a++){if(!o.valideExtensionImg(e.files.item(a)))throw{msg:`L'estensione valida sono: ${h.y.TYPES_EXT_IMG.join(", ")}`};i.push((0,x.n)(o._imageService.readFile(e.files.item(a))))}i=yield Promise.all(i),o.resetDetailFile();for(let a=0;a<e.files.length;a++)o.fileList.push({name:e.files.item(a)?.name,state:"STAND_BY",size:e.files.item(a)?.size,file:e.files.item(a),data:i[a],uuid:(0,T.D)()});console.log(o.fileList)}catch{}})()}}m.\u0275fac=function(o){return new(o||m)(t.Y36(I.A),t.Y36(M.u))},m.\u0275cmp=t.Xpm({type:m,selectors:[["gestdoc-dettaglio-documento"]],viewQuery:function(o,e){if(1&o&&(t.Gf(O,5),t.Gf(P,5)),2&o){let i;t.iGM(i=t.CRH())&&(e.uploadImg=i.first),t.iGM(i=t.CRH())&&(e.accordionDetailDoc=i.first)}},decls:134,vars:2,consts:[[1,"documento"],[1,"documento__detail"],[1,"divider"],[1,"documento__accordions"],[1,"container"],["id","accordionDetailDoc",1,"accordion"],["accordionDetailDoc",""],[1,"accordion-item"],["id","heading1",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapse1","aria-expanded","true","aria-controls","collapse1",1,"accordion-button","collapsed"],["id","collapse1","data-bs-parent","#accordionDetailDoc","role","region","aria-labelledby","heading1",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"info-container"],[1,"select-wrapper"],["for","tipoDocumentoId"],["id","tipoDocumentoId"],["selected","","value",""],["for","tipoAttoId"],["id","tipoAttoId"],["for","parteId"],["id","parteId"],["for","serieId"],["id","serieId"],[1,"form-group"],["for","comune"],["type","text","id","comune",1,"form-control"],["for","dataAtto",1,"active"],["type","date","id","dataAtto",1,"form-control"],["for","annoAtto"],["type","number","id","annoAtto",1,"form-control"],["for","nroAtto"],["type","number","id","nroAtto",1,"form-control"],["id","heading2",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapse2","aria-expanded","false","aria-controls","collapse2",1,"accordion-button","collapsed"],["id","collapse2","data-bs-parent","#accordionDetailDoc","role","region","aria-labelledby","heading2",1,"accordion-collapse","collapse"],["type","file","name","uploadImg","id","uploadImg","multiple","multiple",1,"upload",3,"change"],["uploadImg",""],["for","uploadImg",1,"upload-label"],["name","upload"],["class","images-container",4,"ngIf"],["id","heading3",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapse3","aria-expanded","false","aria-controls","collapse3",1,"accordion-button","collapsed"],["id","collapse3","data-bs-parent","#accordionDetailDoc","role","region","aria-labelledby","heading3",1,"accordion-collapse","collapse"],[1,"anagrafica-container"],["type","button",1,"btn","btn-primary","btn-icon","btn-xs"],["name","person-fill-add"],[1,"table","table-hover"],["scope","col",1,"min-width-140"],["scope","col",1,"min-width-110"],["scope","col",1,"min-width-125"],[4,"ngFor","ngForOf"],[1,"images-container"],[1,"upload-file-list","upload-file-list-image","overflow-auto","col-5"],[1,"card-detail-file","col-7"],[1,"card-wrapper"],[1,"card"],[1,"card-body"],[4,"ngIf"],[3,"file","outSelect",4,"ngIf"],[3,"file","outSelect"],[4,"ngIf","ngIfElse"],["documentTemplate",""],[1,"d-flex","justify-content-between","align-items-center","m-b-16","detail-document__header"],[1,"card-title","h5"],["name","delete","size","sm","itTooltip","Cancellare",1,"icon-primary","cursor-pointer","m-l-5",3,"click"],[1,"container-img"],[1,"rounded","img-fluid",3,"src","alt"],["showHeaderDetail",""],[1,"overflow-auto","containter-table-document"],[3,"data","search"],["name","arrow-left","size","sm",1,"icon-primary","cursor-pointer",3,"click"],["type","text","id","search","name","search","placeholder","Cerca",1,"form-control",3,"appFocus","formControl"],["class","input-group-prepend cursor-pointer",4,"ngIf"],[1,"input-group-prepend","cursor-pointer"],[1,"input-group-text"],["name","close","size","sm",1,"icon-primary",3,"click"],[1,"card-title","h5","m-0"],["name","search","size","sm","itTooltip","Cercare",1,"icon-primary","cursor-pointer",3,"click"],[1,"top-icon","d-flex","justify-content-center"],["name","files"],[1,"card-title","h5","no_toc","text-center"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Dettaglio documento"),t.qZA(),t.TgZ(4,"ul")(5,"li")(6,"strong"),t._uU(7,"Tipo documento"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Atto Matrimonio"),t.qZA()(),t.TgZ(10,"li")(11,"strong"),t._uU(12,"Anagrafiche"),t.qZA(),t.TgZ(13,"span"),t._uU(14,"Atto Matrimonio"),t.qZA()(),t.TgZ(15,"li")(16,"strong"),t._uU(17,"Immagini"),t.qZA(),t.TgZ(18,"span"),t._uU(19,"Atto Matrimonio"),t.qZA()(),t.TgZ(20,"li")(21,"strong"),t._uU(22,"Comune"),t.qZA(),t.TgZ(23,"span"),t._uU(24,"Gironico"),t.qZA()(),t.TgZ(25,"li")(26,"strong"),t._uU(27,"Data documento"),t.qZA(),t.TgZ(28,"span"),t._uU(29,"10/10/2023"),t.qZA()(),t.TgZ(30,"li")(31,"strong"),t._uU(32,"Anno documento"),t.qZA(),t.TgZ(33,"span"),t._uU(34,"2023"),t.qZA()(),t.TgZ(35,"li")(36,"strong"),t._uU(37,"Parte"),t.qZA(),t.TgZ(38,"span"),t._uU(39,"2"),t.qZA()(),t.TgZ(40,"li")(41,"strong"),t._uU(42,"Serie"),t.qZA(),t.TgZ(43,"span"),t._uU(44,"A"),t.qZA()()()(),t._UZ(45,"div",2),t.TgZ(46,"div",3)(47,"div",4)(48,"div",5,6)(50,"div",7)(51,"h2",8)(52,"button",9),t._uU(53," Informazioni "),t.qZA()(),t.TgZ(54,"div",10)(55,"div",11)(56,"div",12)(57,"div",13)(58,"label",14),t._uU(59,"Tipo documento"),t.qZA(),t.TgZ(60,"select",15)(61,"option",16),t._uU(62,"Scegli un'opzione"),t.qZA()()(),t.TgZ(63,"div",13)(64,"label",17),t._uU(65,"Tipo atto"),t.qZA(),t.TgZ(66,"select",18)(67,"option",16),t._uU(68,"Scegli un'opzione"),t.qZA()()(),t.TgZ(69,"div",13)(70,"label",19),t._uU(71,"Parte"),t.qZA(),t.TgZ(72,"select",20)(73,"option",16),t._uU(74,"Scegli un'opzione"),t.qZA()()(),t.TgZ(75,"div",13)(76,"label",21),t._uU(77,"Serie"),t.qZA(),t.TgZ(78,"select",22)(79,"option",16),t._uU(80,"Scegli un'opzione"),t.qZA()()(),t.TgZ(81,"div",23)(82,"label",24),t._uU(83,"Comune"),t.qZA(),t._UZ(84,"input",25),t.qZA(),t.TgZ(85,"div",23)(86,"label",26),t._uU(87,"Data atto"),t.qZA(),t._UZ(88,"input",27),t.qZA(),t.TgZ(89,"div",23)(90,"label",28),t._uU(91,"Anno atto"),t.qZA(),t._UZ(92,"input",29),t.qZA(),t.TgZ(93,"div",23)(94,"label",30),t._uU(95,"Numero atto"),t.qZA(),t._UZ(96,"input",31),t.qZA()()()()(),t.TgZ(97,"div",7)(98,"h2",32)(99,"button",33),t._uU(100," Immagini "),t.qZA()(),t.TgZ(101,"div",34)(102,"div",11)(103,"input",35,36),t.NdJ("change",function(){return e.uploadImage()}),t.qZA(),t.TgZ(105,"label",37),t._UZ(106,"app-icon",38),t.TgZ(107,"span"),t._uU(108,"Upload Immagini"),t.qZA()(),t.YNc(109,Y,9,3,"div",39),t.qZA()()(),t.TgZ(110,"div",7)(111,"h2",40)(112,"button",41),t._uU(113," Anagrafiche "),t.qZA()(),t.TgZ(114,"div",42)(115,"div",11)(116,"div",43)(117,"button",44),t._UZ(118,"app-icon",45),t.TgZ(119,"span"),t._uU(120,"Aggiunge Anagrafica"),t.qZA()(),t.TgZ(121,"table",46)(122,"thead")(123,"tr")(124,"th",47),t._uU(125,"Nome"),t.qZA(),t.TgZ(126,"th",47),t._uU(127,"cognome"),t.qZA(),t.TgZ(128,"th",48),t._uU(129,"Data nascita"),t.qZA(),t.TgZ(130,"th",49),t._uU(131,"Luego nascita"),t.qZA()()(),t.TgZ(132,"tbody"),t.YNc(133,H,10,7,"tr",50),t.qZA()()()()()()()()()()),2&o&&(t.xp6(109),t.Q6J("ngIf",e.fileList.length),t.xp6(24),t.Q6J("ngForOf",e.personaList))},dependencies:[s.sg,s.O5,C.U,S._,b.t,G._,A.i9,U.R,r.YN,r.Kr,r.Fj,r.JJ,r.oH,s.uU],styles:[".documento[_ngcontent-%COMP%]{display:flex;width:100%}.documento[_ngcontent-%COMP%]   .documento__detail[_ngcontent-%COMP%]{max-width:273px;flex:1}.documento[_ngcontent-%COMP%]   .documento__detail[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px}.documento[_ngcontent-%COMP%]   .documento__detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.documento[_ngcontent-%COMP%]   .documento__detail[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.documento[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:1px solid var(--bs-primary);border-radius:50px;margin:16px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]{flex:1}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:24px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{margin:0 16px 32px 0;max-width:180px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-right:16px;max-width:180px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{margin-bottom:16px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .images-container[_ngcontent-%COMP%]{display:flex}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .images-container[_ngcontent-%COMP%]   .upload-file-list[_ngcontent-%COMP%]{max-width:300px;margin-right:16px}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .images-container[_ngcontent-%COMP%]   .card-detail-file[_ngcontent-%COMP%]   .container-img[_ngcontent-%COMP%]{max-width:518px;max-height:300px;overflow:auto}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .images-container[_ngcontent-%COMP%]   .card-detail-file[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.documento[_ngcontent-%COMP%]   .documento__accordions[_ngcontent-%COMP%]   .anagrafica-container[_ngcontent-%COMP%]   .btn.btn-xs[_ngcontent-%COMP%]{margin-bottom:16px}"]});var l=c(7340),j=c(9300),V=c(8372),$=c(7188),B=c(585),K=c(6652),R=c(9799),k=c(533),X=c(6279),W=c(3556),tt=c(2925),et=c(3499),ot=c(6585),nt=c(2134);function it(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-icon",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchControl.setValue(""))}),t.qZA(),t.BQk()}}function at(n,o){1&n&&t._UZ(0,"app-icon",39)}function ct(n,o){if(1&n&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.tipoDocumentoId),t.xp6(1),t.Oqu(e.tipoDocumentoDesc)}}function rt(n,o){if(1&n&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.tipoAttoId),t.xp6(1),t.Oqu(e.tipoAttoDesc)}}function lt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"label",41),t._uU(2,"Tipo di atto"),t.qZA(),t.TgZ(3,"select",42),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeTipoAtto())}),t.TgZ(4,"option",22),t._uU(5,"Scegli un'opzione"),t.qZA(),t.YNc(6,rt,2,2,"option",23),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.tipiAtto)}}function st(n,o){if(1&n&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.tipoParteId),t.xp6(1),t.Oqu(e.tipoParteDesc)}}function pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"label",43),t._uU(2,"Parte"),t.qZA(),t.TgZ(3,"select",44),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeParte())}),t.TgZ(4,"option",22),t._uU(5,"Scegli un'opzione"),t.qZA(),t.YNc(6,st,2,2,"option",23),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.tipiParte)}}function dt(n,o){if(1&n&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.tipoSerieId),t.xp6(1),t.Oqu(e.tipoSerieDesc)}}function mt(n,o){if(1&n&&(t.TgZ(0,"div",19)(1,"label",45),t._uU(2,"Serie"),t.qZA(),t.TgZ(3,"select",46)(4,"option",22),t._uU(5,"Scegli un'opzione"),t.qZA(),t.YNc(6,dt,2,2,"option",23),t.qZA()()),2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.tipiSerie)}}function ut(n,o){1&n&&t._UZ(0,"app-curtain")}function gt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"app-icon",53),t.NdJ("click",function(){const p=t.CHM(e).$implicit,Dt=t.oxw(2);return t.KtG(Dt.redirectDetail(p))}),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.nomeDocumento," "),t.xp6(2),t.hij(" ",t.xi3(5,6,e.dataAtto,"dd/MM/yyyy"),""),t.xp6(3),t.hij(" ",e.annoAtto," "),t.xp6(2),t.hij(" ",e.nomeCompletoAnagrafica," "),t.xp6(2),t.hij(" ",t.xi3(12,9,e.dataNascitaAnagrafica,"dd/MM/yyyy"),""),t.xp6(3),t.hij(" ",e.luogoNascitaAnagrafica,"")}}function _t(n,o){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,ut,1,0,"app-curtain",36),t.TgZ(2,"table",48)(3,"thead")(4,"tr")(5,"th",49),t._uU(6,"Documento"),t.qZA(),t.TgZ(7,"th",50),t._uU(8,"Data atto"),t.qZA(),t.TgZ(9,"th",50),t._uU(10,"Anno atto"),t.qZA(),t.TgZ(11,"th",50),t._uU(12,"Nome Cognome"),t.qZA(),t.TgZ(13,"th",50),t._uU(14,"Luogo Nascita"),t.qZA(),t.TgZ(15,"th",50),t._uU(16,"Data Nascita"),t.qZA(),t._UZ(17,"th",51),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,gt,17,12,"tr",52),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.serviceSearchForPaginator),t.xp6(18),t.Q6J("ngForOf",e.documentoList)}}function ft(n,o){1&n&&(t.TgZ(0,"div")(1,"p",54),t._uU(2,"Per iniziare \xe8 necessario filtrare "),t.qZA()())}function ht(n,o){1&n&&t._UZ(0,"app-spinner")}function vt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",55),t.NdJ("paginationChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.paginationChange())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("currentPagination",e.paginator)}}class u{constructor(o,e,i,a,p){this._fb=o,this._tipoDocumentoService=e,this._documentoService=i,this._router=a,this._activatedRoute=p,this.viewFilterAdvance=!1,this.showModalCarouselDoc=!1,this.tipiDocumento=[],this.tipiAtto=[],this.tipiParte=[],this.tipiSerie=[],this.documentoList=[],this.serviceSearch=!1,this.serviceSearchForPaginator=!1,this.total=0,this.paginator=new B.t({pageSize:10}),this.personSelected=null,this.documentSelected=null,this.spinner={tipoDocumento:!1},this.formGroup=this._buildForm()}ngOnInit(){this.searchControl.valueChanges.pipe((0,j.h)(o=>!1===this.viewFilterAdvance&&(o||"").length>3),(0,V.b)(500)).subscribe(()=>{this.filteredSearch()}),this.loadTipoDocumento()}get searchControl(){return this.formGroup.controls.seach}get tipoDocumentoIdControl(){return this.formGroup.controls.tipoDocumentoId}get nroAttoControl(){return this.formGroup.controls.nroAtto}get annoAttoControl(){return this.formGroup.controls.annoAtto}get dataDocumentoControl(){return this.formGroup.controls.dataDocumento}_buildForm(){return this._fb.group({seach:[""],tipoDocumentoId:[""],nroAtto:[null],annoAtto:[null,[r.kI.maxLength(4),K.q.isNumeric()]],dataDocumento:[""]})}filteredSearch(){this.serviceSearch||(this.serviceSearch=!0,this._documentoService.documenti().subscribe({next:o=>{this.paginator.currentPage=1,this.paginator.totalPages=parseInt(String(o.total/this.paginator.pageSize)),this.documentoList=o.data,this.total=o.total,this.serviceSearch=!1},error:o=>{this.serviceSearch=!1}}))}loadTipoDocumento(){this.spinner.tipoDocumento=!0,this.tipoDocumentoIdControl.disable(),this._tipoDocumentoService.tipiDocumento().subscribe({next:o=>{this.spinner.tipoDocumento=!1,this.tipiDocumento=o,this.tipoDocumentoIdControl.enable()},error:o=>{this.spinner.tipoDocumento=!0,this.tipoDocumentoIdControl.enable()}})}changeTipoDocumento(){this.formGroup.removeControl("tipoAttoId"),this.formGroup.removeControl("parteId"),this.formGroup.removeControl("serieId"),(!this.tipoDocumentoIdControl.value||"null"==this.tipoDocumentoIdControl.value)&&this.tipoDocumentoIdControl.setValue(""),!this.tipoDocumentoIdControl.invalid&&this._tipoDocumentoService.tipiAtto(this.tipoDocumentoIdControl.value).subscribe({next:o=>{o.length&&(this.tipiAtto=o,this.formGroup.addControl("tipoAttoId",new r.NI("")))},error:o=>{}})}changeTipoAtto(){this.formGroup.removeControl("parteId"),this.formGroup.removeControl("serieId");const o=this.formGroup.controls.tipoAttoId.value;(!o||"null"==o)&&this.formGroup.controls.tipoAttoId.setValue(""),!this.formGroup.controls.tipoAttoId.invalid&&(0,$.$)(this._tipoDocumentoService.tipiParte(Number(o)),this._tipoDocumentoService.tipoSerie(Number(o),this.formGroup.get("parteId")?.value)).subscribe({next:([e,i])=>{e.length&&(this.tipiParte=e,this.formGroup.addControl("parteId",new r.NI(""))),i.length&&(this.tipiSerie=i,this.formGroup.addControl("SerieId",new r.NI("")))}})}changeParte(){this.formGroup.removeControl("serieId");const o=this.formGroup.controls.parteId.value;(!o||"null"==o)&&this.formGroup.controls.parteId.setValue(""),!this.formGroup.controls.parteId.invalid&&this._tipoDocumentoService.tipoSerie(Number(this.formGroup.controls.tipoAttoId.value),Number(o)).subscribe({next:e=>{this.tipiSerie=e,this.tipiSerie.length&&this.formGroup.addControl("serieId",new r.NI(""))}})}paginationChange(){if(this.serviceSearchForPaginator)return;this.serviceSearchForPaginator=!0;const o=this.paginator.currentPage*this.paginator.pageSize;this._documentoService.documenti(o-this.paginator.pageSize,o).subscribe({next:i=>{this.documentoList=i.data,this.serviceSearchForPaginator=!1},error:i=>{this.serviceSearchForPaginator=!1}})}redirectDetail(o){this._router.navigate(["dettaglio-documento",o.idDocumento],{relativeTo:this._activatedRoute})}}u.\u0275fac=function(o){return new(o||u)(t.Y36(r.qu),t.Y36(R.d),t.Y36(k.t),t.Y36(_.F0),t.Y36(_.gz))},u.\u0275cmp=t.Xpm({type:u,selectors:[["gestdoc-main-documenti"]],decls:51,vars:18,consts:[[1,"container"],[1,"container-filter"],[1,"row"],[1,"form-group","col-11","input-search"],[1,"input-group"],["for","search"],["type","text","id","search","name","search",1,"form-control",3,"formControl"],[1,"input-group-prepend"],[1,"input-group-text"],[4,"ngIf","ngIfElse"],["searchIcon",""],[1,"col-1","text-end"],["type","button","tooltipPlacement","bottom",1,"btn","btn-icon",3,"itTooltip","click"],["size","sm",1,"primary-color","icon-trans",3,"name"],["name","slideInOut",1,"row"],[1,"card-wrapper","card-filter"],[1,"card","card-bg"],[1,"card-body"],[1,"container-filter-advance",3,"formGroup"],[1,"select-wrapper","filter-item"],["for","tipoDocumentoId"],["id","tipoDocumentoId","formControlName","tipoDocumentoId",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"start","typeInput"],["class","select-wrapper filter-item",4,"ngIf"],[1,"form-group","filter-item"],["for","nroAtto"],["type","number","id","nroAtto","formControlName","nroAtto",1,"form-control"],["for","annoAtto"],["type","text","onlyNumber","","onNumber","","id","annoAtto","formControlName","annoAtto","maxlength","4",1,"form-control"],["for","dataDocumento",1,"active"],["type","date","id","dataDocumento","formControlName","dataDocumento",1,"form-control"],[1,"row","d-flex"],["type","button",1,"btn","btn-primary","btn-search",3,"disabled","click"],["class","container-table",4,"ngIf"],[4,"ngIf"],[3,"currentPagination","paginationChange",4,"ngIf"],["name","close","size","sm",1,"icon-primary","cursor-pointer",3,"click"],["name","search","size","sm",1,"icon-primary"],[3,"value"],["for","tipoAttoId"],["id","tipoAttoId","formControlName","tipoAttoId",3,"change"],["for","parteId"],["id","parteId","formControlName","parteId",3,"change"],["for","serieId"],["id","serieId","formControlName","serieId"],[1,"container-table"],[1,"table","table-hover"],["scope","col",1,"min-width-140"],["scope","col",1,"min-width-125"],["scope","col"],[4,"ngFor","ngForOf"],["name","arrow-right","itTooltip","Visualizzare dettaglio",1,"icon-primary","cursor-pointer",3,"click"],[1,"text-center"],[3,"currentPagination","paginationChange"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Cerca persona"),t.qZA(),t._UZ(7,"input",6),t.TgZ(8,"div",7)(9,"div",8),t.YNc(10,it,2,0,"ng-container",9),t.YNc(11,at,1,0,"ng-template",null,10,t.W1O),t.qZA()()()(),t.TgZ(13,"div",11)(14,"button",12),t.NdJ("click",function(){return e.viewFilterAdvance=!e.viewFilterAdvance}),t._UZ(15,"app-icon",13),t.qZA()()(),t.TgZ(16,"div",14)(17,"div",15)(18,"div",16)(19,"div",17)(20,"form",18)(21,"div",19)(22,"label",20),t._uU(23,"Tipo documento"),t.qZA(),t.TgZ(24,"select",21),t.NdJ("change",function(){return e.changeTipoDocumento()}),t.TgZ(25,"option",22),t._uU(26,"Scegli un'opzione"),t.qZA(),t.YNc(27,ct,2,2,"option",23),t.qZA(),t._UZ(28,"app-spinner-input-form",24),t.qZA(),t.YNc(29,lt,7,1,"div",25),t.YNc(30,pt,7,1,"div",25),t.YNc(31,mt,7,1,"div",25),t.TgZ(32,"div",26)(33,"label",27),t._uU(34,"Numero atto"),t.qZA(),t._UZ(35,"input",28),t.qZA(),t.TgZ(36,"div",26)(37,"label",29),t._uU(38,"Anno atto"),t.qZA(),t._UZ(39,"input",30),t.qZA(),t.TgZ(40,"div",26)(41,"label",31),t._uU(42,"Data documento"),t.qZA(),t._UZ(43,"input",32),t.qZA()(),t.TgZ(44,"div",33)(45,"button",34),t.NdJ("click",function(){return e.filteredSearch()}),t._uU(46,"Cerca"),t.qZA()()()()()(),t.YNc(47,_t,20,2,"div",35),t.YNc(48,ft,3,0,"div",36),t.YNc(49,ht,1,0,"app-spinner",36),t.YNc(50,vt,1,1,"app-pagination",37),t.qZA()()),2&o){const i=t.MAs(12);t.xp6(7),t.Q6J("formControl",e.searchControl),t.xp6(3),t.Q6J("ngIf",e.searchControl.value)("ngIfElse",i),t.xp6(4),t.Q6J("itTooltip",e.viewFilterAdvance?"Nascondere filtro":"Mostra filtro"),t.xp6(1),t.Q6J("name",e.viewFilterAdvance?"filter-square":"filter"),t.xp6(1),t.Q6J("@slideInOut",e.viewFilterAdvance?"in":"out"),t.xp6(4),t.Q6J("formGroup",e.formGroup),t.xp6(7),t.Q6J("ngForOf",e.tipiDocumento),t.xp6(1),t.Q6J("start",e.spinner.tipoDocumento)("typeInput","select"),t.xp6(1),t.Q6J("ngIf",e.formGroup.controls.tipoAttoId),t.xp6(1),t.Q6J("ngIf",e.formGroup.controls.parteId),t.xp6(1),t.Q6J("ngIf",e.formGroup.controls.serieId),t.xp6(14),t.Q6J("disabled",e.formGroup.invalid||e.serviceSearch),t.xp6(2),t.Q6J("ngIf",!e.serviceSearch),t.xp6(1),t.Q6J("ngIf",!e.documentoList.length&&!e.serviceSearch),t.xp6(1),t.Q6J("ngIf",e.serviceSearch),t.xp6(1),t.Q6J("ngIf",e.documentoList.length&&!e.serviceSearch)}},dependencies:[s.sg,s.O5,C.U,X.F,W.Q,tt.O,et.G,A.i9,ot.O,nt.p,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.nD,r.oH,r.sg,r.u,s.uU],styles:[".container-filter[_ngcontent-%COMP%]{max-width:960px}.container-filter[_ngcontent-%COMP%]   .input-search[_ngcontent-%COMP%]{margin-bottom:2rem}.container-filter[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{box-shadow:none!important;padding:0!important;display:flex;justify-content:baseline;align-items:baseline;max-height:32px}.container-filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{padding-left:calc(var(--bs-gutter-x) * .5)}.container-filter[_ngcontent-%COMP%]   .container-filter-advance[_ngcontent-%COMP%]{max-width:960px;display:grid;grid-template-columns:1fr 1fr 1fr}.container-filter[_ngcontent-%COMP%]   .container-filter-advance[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{margin:24px 24px 24px 0}.container-filter[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{max-width:100px}.container-filter[_ngcontent-%COMP%]   .card-filter[_ngcontent-%COMP%]{padding:16px}.container-table[_ngcontent-%COMP%]{max-width:960px;margin:32px 0;overflow:auto;position:relative}.container-table[_ngcontent-%COMP%]   .link-list[_ngcontent-%COMP%]{padding:0;margin:0}.card.card-bg[_ngcontent-%COMP%]:after{margin-top:0}"],data:{animation:[(0,l.X$)("slideInOut",[(0,l.SB)("in",(0,l.oB)({overflow:"hidden",height:"*",opacity:"1"})),(0,l.SB)("out",(0,l.oB)({opacity:"0",overflow:"hidden",height:"0px"})),(0,l.eR)("in => out",(0,l.jt)("400ms ease-in-out")),(0,l.eR)("out => in",(0,l.jt)("400ms ease-in-out"))])]}});class g{constructor(){document.title="SpazioZero | Gest. Documenti"}ngOnInit(){}}g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-gestione-documenti"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[_.lC]});const Ct=_.Bz.forChild([{path:"",component:g,children:[{path:"",pathMatch:"prefix",component:u},{path:"dettaglio-documento/:id",pathMatch:"prefix",component:m}]}]);var At=c(3500);class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[s.ez,Ct,At.m,r.u5,r.UX]})}}]);