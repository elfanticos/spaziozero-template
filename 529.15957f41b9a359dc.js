"use strict";(self.webpackChunkSpazioZero=self.webpackChunkSpazioZero||[]).push([[529],{9529:(I,h,i)=>{i.r(h),i.d(h,{GestioneAnagraficheModule:()=>p});var g=i(6895),_=i(1039),l=i(7340),C=i(9300),v=i(8372),A=i(585),t=i(8274),a=i(433),Z=i(4004),b=i(529);class m{constructor(n){this._http=n}anagraficaList(n=0,o=10){return this._http.get("/anagraficaList").pipe((0,Z.U)(r=>({total:r.length,data:JSON.parse(JSON.stringify(r)).slice(n,o)})))}}m.\u0275fac=function(n){return new(n||m)(t.LFG(b.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var M=i(2775),N=i(3556),x=i(4734),T=i(7125),G=i(3173);const F=["modalFormAnagrafica"];class f{constructor(n){this._fb=n,this.outClose=new t.vpe,this.formGroup=this._buildForm()}ngOnInit(){setTimeout(()=>{this.anagrafica&&this.setValueForm()},1)}ngAfterViewInit(){this.handlerModal=new G.u_(this.modal?.nativeElement),this.handlerModal?.show(),this.modal?.nativeElement.addEventListener("hidden.bs.modal",()=>this.closeModal())}get nomeControl(){return this.formGroup.controls.nome}get cognomeControl(){return this.formGroup.controls.cognome}get dataNascitaControl(){return this.formGroup.controls.dataNascita}get luogoNascitaControl(){return this.formGroup.controls.luogoNascita}_buildForm(){return this._fb.group({nome:[null,[a.kI.required,a.kI.minLength(2),a.kI.maxLength(60)]],cognome:[null,[a.kI.required,a.kI.minLength(2),a.kI.maxLength(60)]],dataNascita:[null,[a.kI.required]],luogoNascita:[null,[a.kI.required]]})}closeModal(){this.handlerModal?.hide(),this.outClose.emit(!0)}setValueForm(){Object.keys(this.formGroup.value).map(o=>{"dataNascita"==o&&this.anagrafica[o]&&(this.anagrafica[o]=this.anagrafica[o].replace("T00:00:00","")),this.formGroup.controls[o].setValue(this.anagrafica[o])})}sendForm(){console.log(this.formGroup.value),this.closeModal()}}function y(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"div",35)(10,"button",36),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.openModalForm(s))}),t._UZ(11,"app-icon",37),t.qZA(),t.TgZ(12,"button",38),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.openModalConfirmDelete(s))}),t._UZ(13,"app-icon",39),t.qZA()()()()}if(2&e){const o=n.$implicit;t.xp6(2),t.AsE("",o.nome," ",o.congome,""),t.xp6(2),t.hij(" ",t.xi3(5,4,o.dataNascita,"dd/MM/yyyy"),""),t.xp6(3),t.hij(" ",o.luogoNascita,"")}}function U(e,n){1&e&&(t.TgZ(0,"div")(1,"p",40),t._uU(2,"Per iniziare \xe8 necessario filtrare "),t.qZA()())}function w(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-pagination",41),t.NdJ("paginationChange",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.paginationChange())}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("currentPagination",o.paginator)}}function J(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-modal-form-anagrafica",42),t.NdJ("outClose",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.showModalFormAnagrafica=!1)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("anagrafica",o.personaSelected)}}function O(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-modal-confirm",43),t.NdJ("outClose",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.showModalConfirm=!1)})("outConfirm",function(c){t.CHM(o);const s=t.oxw();return t.KtG(s.confirmDelete(c))}),t.qZA()}2&e&&t.Q6J("title","Conferma per eliminare")("alertDesc",!0)("descrizione","che una volta confermata, non pu\xf2 essere recuperata")}f.\u0275fac=function(n){return new(n||f)(t.Y36(a.qu))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-modal-form-anagrafica"]],viewQuery:function(n,o){if(1&n&&t.Gf(F,5),2&n){let r;t.iGM(r=t.CRH())&&(o.modal=r.first)}},inputs:{anagrafica:"anagrafica"},outputs:{outClose:"outClose"},decls:31,vars:8,consts:[[1,"it-example-modal"],["tabindex","-1","role","dialog","id","modalFormAnagrafica",1,"modal","modal"],["modalFormAnagrafica",""],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","h5"],[1,"modal-body"],[1,"container-form-utente",3,"formGroup"],[1,"form-group"],["for","nome-form"],["type","text","id","nome-form","formControlName","nome",1,"form-control"],["for","cognome-form"],["type","text","id","cognome-form","formControlName","cognome",1,"form-control"],["for","dataNascita-form",1,"active"],["type","date","id","dataNascita-form","formControlName","dataNascita",1,"form-control"],["for","luogoNascita-form"],["type","text","id","luogoNascita-form","formControlName","luogoNascita",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7),t.qZA()(),t.TgZ(8,"div",7)(9,"form",8)(10,"div",9)(11,"label",10),t._uU(12,"Nome"),t.qZA(),t._UZ(13,"input",11),t.qZA(),t.TgZ(14,"div",9)(15,"label",12),t._uU(16,"Cognome"),t.qZA(),t._UZ(17,"input",13),t.qZA(),t.TgZ(18,"div",9)(19,"label",14),t._uU(20,"Data nascita"),t.qZA(),t._UZ(21,"input",15),t.qZA(),t.TgZ(22,"div",9)(23,"label",16),t._uU(24,"Luogo nascita"),t.qZA(),t._UZ(25,"input",17),t.qZA()()(),t.TgZ(26,"div",18)(27,"button",19),t.NdJ("click",function(){return o.closeModal()}),t._uU(28,"No"),t.qZA(),t.TgZ(29,"button",20),t.NdJ("click",function(){return o.sendForm()}),t._uU(30,"Envia"),t.qZA()()()()()()),2&n&&(t.xp6(7),t.Oqu(o.anagrafica?"Aggiornare anagrafica":"Inserire anagrafica"),t.xp6(2),t.Q6J("formGroup",o.formGroup),t.xp6(2),t.ekj("active",o.nomeControl.value),t.xp6(4),t.ekj("active",o.cognomeControl.value),t.xp6(8),t.ekj("active",o.luogoNascitaControl.value))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".container-form-utente[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:32px 0}"]});class d{constructor(n,o){this._fb=n,this._anagraficaService=o,this.viewFilterAdvance=!1,this.paginator=new A.t({pageSize:10}),this.total=0,this.personaList=[],this.serviceSearch=!1,this.showModalFormAnagrafica=!1,this.personaSelected=null,this.showModalConfirm=!1,this.formGroup=this._buildForm()}ngOnInit(){this.searchControl.valueChanges.pipe((0,C.h)(n=>!1===this.viewFilterAdvance&&(n||"").length>3),(0,v.b)(500)).subscribe(()=>{this.filteredSearch()})}get searchControl(){return this.formGroup.controls.seach}get luogoNascitaControl(){return this.formGroup.controls.luogoNascita}get dataNascitaControl(){return this.formGroup.controls.dataNascita}_buildForm(){return this._fb.group({seach:[""],luogoNascita:[""],dataNascita:[""]})}filteredSearch(){this._anagraficaService.anagraficaList().subscribe({next:n=>{this.paginator.currentPage=1,this.paginator.totalPages=parseInt(String(n.total/this.paginator.pageSize)),this.personaList=n.data,this.total=n.total}})}paginationChange(){const n=this.paginator.currentPage*this.paginator.pageSize;this._anagraficaService.anagraficaList(n-this.paginator.pageSize,n).subscribe({next:r=>{this.personaList=r.data}})}openModalForm(n){this.personaSelected=n,this.showModalFormAnagrafica=!0}openModalConfirmDelete(n){this.personaSelected=n,this.showModalConfirm=!0}confirmDelete(n){n&&(console.log(this.personaSelected),this.showModalConfirm=!1)}}d.\u0275fac=function(n){return new(n||d)(t.Y36(a.qu),t.Y36(m))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-gestione-anagrafiche"]],decls:50,vars:11,consts:[[1,"container"],[1,"container-filter"],[1,"row"],[1,"form-group","col-11","input-search"],[1,"input-group"],["for","search"],["type","text","id","search","name","search",1,"form-control",3,"formControl"],[1,"input-group-prepend"],[1,"input-group-text"],["name","search","size","sm",1,"icon-primary"],[1,"col-1"],["type","button","tooltipPlacement","bottom",1,"btn","btn-icon",3,"itTooltip","click"],["size","sm",1,"primary-color","icon-trans",3,"name"],["type","button","itTooltip","Nueva anagrafica","tooltipPlacement","bottom",1,"btn","btn-icon",3,"click"],["name","person-fill-add","size","sm",1,"primary-color","icon-trans"],["name","slideInOut",1,"row"],[1,"card-wrapper","card-filter"],[1,"card","card-bg"],[1,"card-body"],[1,"container-filter-advance",3,"formGroup"],[1,"form-group","filter-item"],["for","luogoNascita"],["type","text","id","luogoNascita","formControlName","luogoNascita",1,"form-control"],["for","dataNascita",1,"active"],["type","date","id","dataNascita","formControlName","dataNascita",1,"form-control"],[1,"row","d-flex"],["type","button",1,"btn","btn-primary","btn-search",3,"disabled","click"],[1,"container-table"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPagination","paginationChange",4,"ngIf"],[3,"anagrafica","outClose",4,"ngIf"],[3,"title","alertDesc","descrizione","outClose","outConfirm",4,"ngIf"],[1,"d-flex"],["type","button","itTooltip","Aggiornare","tooltipPlacement","bottom",1,"btn","btn-icon",3,"click"],["name","pencil","size","sm",1,"icon-primary"],["type","button","itTooltip","Eliminare","tooltipPlacement","bottom",1,"btn","btn-icon",3,"click"],["name","delete","size","sm",1,"icon-warning"],[1,"text-center"],[3,"currentPagination","paginationChange"],[3,"anagrafica","outClose"],[3,"title","alertDesc","descrizione","outClose","outConfirm"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Cerca persona"),t.qZA(),t._UZ(7,"input",6),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"app-icon",9),t.qZA()()()(),t.TgZ(11,"div",10)(12,"button",11),t.NdJ("click",function(){return o.viewFilterAdvance=!o.viewFilterAdvance}),t._UZ(13,"app-icon",12),t.qZA(),t.TgZ(14,"button",13),t.NdJ("click",function(){return o.openModalForm()}),t._UZ(15,"app-icon",14),t.qZA()()(),t.TgZ(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"form",19)(21,"div",20)(22,"label",21),t._uU(23,"Luogo nascita"),t.qZA(),t._UZ(24,"input",22),t.qZA(),t.TgZ(25,"div",20)(26,"label",23),t._uU(27,"Data nascita"),t.qZA(),t._UZ(28,"input",24),t.qZA()(),t.TgZ(29,"div",25)(30,"button",26),t.NdJ("click",function(){return o.filteredSearch()}),t._uU(31,"Cerca"),t.qZA()()()()()(),t.TgZ(32,"div",27)(33,"table",28)(34,"thead")(35,"tr")(36,"th",29),t._uU(37,"Nome e cognome"),t.qZA(),t.TgZ(38,"th",29),t._uU(39,"Data nascita"),t.qZA(),t.TgZ(40,"th",29),t._uU(41,"Luego nascita"),t.qZA(),t.TgZ(42,"th",29),t._uU(43,"Azioni"),t.qZA()()(),t.TgZ(44,"tbody"),t.YNc(45,y,14,7,"tr",30),t.qZA()()(),t.YNc(46,U,3,0,"div",31),t.YNc(47,w,1,1,"app-pagination",32),t.qZA(),t.YNc(48,J,1,1,"app-modal-form-anagrafica",33),t.YNc(49,O,1,3,"app-modal-confirm",34),t.qZA()),2&n&&(t.xp6(7),t.Q6J("formControl",o.searchControl),t.xp6(5),t.Q6J("itTooltip",o.viewFilterAdvance?"Nascondere filtro":"Mostra filtro"),t.xp6(1),t.Q6J("name",o.viewFilterAdvance?"filter-square":"filter"),t.xp6(3),t.Q6J("@slideInOut",o.viewFilterAdvance?"in":"out"),t.xp6(4),t.Q6J("formGroup",o.formGroup),t.xp6(10),t.Q6J("disabled",o.formGroup.invalid||o.serviceSearch),t.xp6(15),t.Q6J("ngForOf",o.personaList),t.xp6(1),t.Q6J("ngIf",!o.personaList.length),t.xp6(1),t.Q6J("ngIf",o.personaList.length),t.xp6(1),t.Q6J("ngIf",1==o.showModalFormAnagrafica),t.xp6(1),t.Q6J("ngIf",1==o.showModalConfirm))},dependencies:[g.sg,g.O5,M.U,N.Q,x.b,T.i9,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,a.u,f,g.uU],styles:[".container-filter[_ngcontent-%COMP%]{max-width:960px}.container-filter[_ngcontent-%COMP%]   .input-search[_ngcontent-%COMP%]{margin-bottom:2rem}.container-filter[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{box-shadow:none!important;padding:0!important}.container-filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{padding-left:calc(var(--bs-gutter-x) * .5)}.container-filter[_ngcontent-%COMP%]   .container-filter-advance[_ngcontent-%COMP%]{max-width:960px;display:grid;grid-template-columns:1fr 1fr 1fr}.container-filter[_ngcontent-%COMP%]   .container-filter-advance[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{margin:24px 24px 24px 0}.container-filter[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{max-width:100px}.container-filter[_ngcontent-%COMP%]   .card-filter[_ngcontent-%COMP%]{padding:16px}.container-table[_ngcontent-%COMP%]{max-width:960px;margin:32px 0;overflow:auto}.container-table[_ngcontent-%COMP%]   .link-list[_ngcontent-%COMP%]{padding:0;margin:0}.card.card-bg[_ngcontent-%COMP%]:after{margin-top:0}"],data:{animation:[(0,l.X$)("slideInOut",[(0,l.SB)("in",(0,l.oB)({overflow:"hidden",height:"*",opacity:"1"})),(0,l.SB)("out",(0,l.oB)({opacity:"0",overflow:"hidden",height:"0px"})),(0,l.eR)("in => out",(0,l.jt)("400ms ease-in-out")),(0,l.eR)("out => in",(0,l.jt)("400ms ease-in-out"))])]}});const q=_.Bz.forChild([{path:"",pathMatch:"full",component:d}]);var S=i(3500);class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[g.ez,q,S.m,a.u5,a.UX]})}}]);